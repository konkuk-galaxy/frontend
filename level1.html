<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>갤럭시 레벨1</title>
  <link rel="stylesheet" href="galaxy.css">
  <style>canvas { background: #eee; display: block; margin: 0 auto;}</style>
</head>
<body>
  <canvas id="myCanvas" width="500" height="500"></canvas>
  <script>
    var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var x = canvas.width/2;
var y = canvas.height-30;
var brickRowCount = 5;
var brickColumnCount = 5;
var brickWidth = 75;
var brickHeight = 20;
var brickPadding = 10;
var brickOffsetTop = 30;
var brickOffsetLeft = 30;
var breakBrick = 0;
var itemType = 0;
var itemUse = 0;
var itemPosX = 0;
var itemPosY = 0;
var itemUse = 0;
var equipItem = 0;

var bricks = [];
function makeBricks(){
    for(var c=0; c<brickColumnCount; c++) {
        bricks[c] = [];
        for(var r=0; r<brickRowCount; r++) {
            bricks[c][r] = { x: 0, y: 0, status: 1, itemBrick: 1};
        }
    }
} // 변수에 지정해둔 벽돌의 행렬 값을 통해 벽돌 행렬을 구현


function drawBricks() {
  for(var c=0; c<brickColumnCount; c++) {
    for(var r=0; r<brickRowCount; r++) {
      if(bricks[c][r].status == 1) {
        var brickX = (r*(brickWidth+brickPadding))+brickOffsetLeft;
        var brickY = (c*(brickHeight+brickPadding))+brickOffsetTop;
        bricks[c][r].x = brickX;
        bricks[c][r].y = brickY;
        ctx.beginPath();
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 벽돌에 이미지 씌울때 쓸 함수
        ctx.rect(brickX, brickY, brickWidth, brickHeight);
        ctx.fillStyle = "#0095DD";
        ctx.fill();
        ctx.closePath();
      }
    }
  }
}  // 벽돌 배치

function arrangeItem() {
    if(breakBrick > 0 && itemUse < 1){
        if(getRandomInt(1, 1000) < 250){
            randomValue = getRandomInt(1, 1000);
            if(randomValue > 1 && randomValue <= 100)
                itemType = 1;
            else if(randomValue > 100 && randomValue <= 200)
                itemType = 2;
            else if(randomValue > 200 && randomValue <= 300)
                itemType = 3;
            else if(randomValue > 300 && randomValue <= 400)
                itemType = 4;
            else if(randomValue > 400 && randomValue <= 500)
                itemType = 5;
            else if(randomValue > 500 && randomValue <= 600)
                itemType = 6;
            else if(randomValue > 600 && randomValue <= 700)
                itemType = 7;
            else if(randomValue > 700 && randomValue <= 800)
                itemType = 8;
            else if(randomValue > 800 && randomValue <= 900)
                itemType = 9;
            else if(randomValue > 900 && randomValue <= 1000)
                itemType = 10;
        }
        breakBrick = 0;
    }
} // 아이템 랜덤 배분 itemType 1~10까지, 깨질때마다 랜덤하게 배분 

function itemEffect() {
    if(itemPosX === 0 && itemPosY === 0){
        itemPosX = x;
        itemPosY = y;
    }
    itemPosY += 1;
    if(itemType === 1){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 1번 아이템 효과         
        itemType = 0;
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 2){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 2번 아이템 효과  
        itemType = 0;       
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 3){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 3번 아이템 효과   
        itemType = 0;      
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 4){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 4번 아이템 효과     
        itemType = 0;    
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 5){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 5번 아이템 효과     
        itemType = 0;    
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 6){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 6번 아이템 효과     
        itemType = 0;    
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 7){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 7번 아이템 효과       
        itemType = 0;  
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 8){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 8번 아이템 효과    
        itemType = 0;     
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 9){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 9번 아이템 효과      
        itemType = 0;   
        itemUse = 0;
        itemPosY = 10000;
    }
    if(itemType === 10){
        //ctx.drawImage(image, Imgx,Imgy,Img width,Img height,brickX,brickY,width,height); --> 아이템 이미지
        // 10번 아이템 효과         
        itemType = 0;
        itemUse = 0;
        itemPosY = 10000;
    }
    
    if(itemPosY > canvas.height){
        itemPosX = 0;
        itemPosY = 0;
        itemType = 0;
    }
    if(itemUse < 0)
        equipItem = 0;
    if(equipItem < 1)
        itemUse = 0;
}

function draw() {
  makeBricks();
  drawBricks();
  arrangeItem();
  if(itemType > 0){
    itemEffect();
  }
  }

draw();
  </script>
</body>
</html>
